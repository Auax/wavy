(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{60:function(e,t,n){},61:function(e,t,n){},99:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),a=n(50),r=n.n(a),o=(n(60),n(61),n(12)),i=n(2),l=n(28),m=n(16),d=n(17),u=n(19),p=n(18),b=n(0),j=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(b.jsx)("div",{className:"bot-card mb-2 tr-f",children:Object(b.jsx)(o.b,{to:this.props.link,children:Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"col",children:[Object(b.jsxs)("h3",{className:"card-title",children:[this.props.title,this.props.is_private&&Object(b.jsx)("i",{className:"fas fa-lock","data-mdb-toggle":"tooltip",title:"Private room"})]}),this.props.subtitles&&this.props.subtitles.map((function(e){return Object(b.jsx)("p",{className:"card-subtitle",children:e},e)}))]})})})},this.props.key)}}]),n}(s.a.Component),h=Object(i.f)(j),f=Object(i.f)((function(){var e=Object(c.useState)([{}]),t=Object(l.a)(e,2),n=t[0],s=t[1];return Object(c.useEffect)((function(){fetch("https://wavy-chat.herokuapp.com/api/rooms").then((function(e){return e.json()})).then((function(e){s(e),console.log("API endpoint data retrieved.")})).catch((function(e){console.log("No rooms retrieved from API endpoint.")}))}),[]),Object(b.jsxs)("div",{className:"home",children:[Object(b.jsxs)("div",{className:"container header text-center mt-5",children:[Object(b.jsx)("h1",{className:"title",children:"Find Rooms"}),Object(b.jsx)("p",{className:"subtitle",children:"Private rooms are currently not enabled. The feature will be implemented soon."}),Object(b.jsx)(o.b,{to:"/create",className:"btn button-md",children:"Create Room"})]}),Object(b.jsx)("div",{className:"container mt-4",children:"undefined"===typeof n.rooms?Object(b.jsx)("p",{className:"text-center subtitle",children:"No rooms available..."}):n.rooms.map((function(e,t){return Object(b.jsx)(h,{link:"/room/".concat(e.id),title:e.name,subtitles:[e.description],is_private:e.private},t)}))})]})})),x=!1,v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Sample error.";if(!x){console.warn("showing error");var t=document.getElementById("error-top");t.classList.remove("d-none");var n=document.getElementById("error-top-text");n.innerText=e,x=!x}},O=function(){if(x){var e=document.getElementById("error-top");e&&(e.classList.add("d-none"),x=!x)}},g=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(b.jsx)("div",{className:"error-top text-center d-none",id:"error-top",children:Object(b.jsx)("p",{id:"error-top-text",children:this.props.text})})}}]),n}(s.a.Component),N=function(){var e=document.getElementById("room-password"),t=document.getElementById("private-room-ch");e.disabled=!t.checked,e.checked?e.setAttribute("disabled","false"):e.setAttribute("required","true")},y=function(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=document.getElementById(e),a="form-text",r=c?s.value.length>t:s.value.length<t;if(r){var o=document.createElement("div");o.setAttribute("class",a),o.innerHTML=n;var i=s.nextSibling;i?i.className!==o.className&&s.parentNode.insertBefore(o,i):s.parentNode.appendChild(o)}else{var l=s.nextSibling;l&&l.className===a&&l.remove()}};var w,k=Object(i.f)((function(){return Object(b.jsxs)("div",{className:"create-room",id:"create-room",children:[Object(b.jsx)(g,{text:""}),Object(b.jsx)("div",{className:"container",children:Object(b.jsx)("div",{className:"row d-flex justify-content-center",children:Object(b.jsxs)("div",{className:"col-md-7",children:[Object(b.jsx)("div",{className:"header text-center mt-5",children:Object(b.jsx)("h1",{className:"title",children:"Create Room"})}),Object(b.jsxs)("form",{className:"form-create-room mt-5 tr-f",onSubmit:function(e){e.preventDefault(),window.grecaptcha.ready((function(){window.grecaptcha.execute("6Lf0A2kcAAAAAL0vjtKP48OV4tdBGFStIryPOtnN",{action:"submit"}).then((function(e){var t=document.getElementById("room-name").value,n=document.getElementById("room-description").value,c=document.getElementById("private-room-ch").checked,s=document.getElementById("room-password").value;fetch("https://wavy-chat.herokuapp.com/api/create/post",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({name:t,description:n,is_private:c,password:s,captcha_token:e})}).then((function(e){return e.json()})).then((function(e){console.log("Data received: ".concat(JSON.stringify(e))),e[200]?window.location.replace("#/room/".concat(e[200])):v(e[400])}))}))}))},autoComplete:"off",children:[Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("label",{htmlFor:"room-name",className:"form-label",children:"Room Name"}),Object(b.jsx)("input",{type:"text",className:"form-control",id:"room-name",name:"room-name","aria-describedby":"roomName",onKeyUp:function(){return y("room-name",30,"The name must be under 30 characters.",!0)},tabIndex:"0",required:!0})]}),Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("label",{htmlFor:"room-description",className:"form-label",children:"Room description"}),Object(b.jsx)("input",{type:"text",className:"form-control",id:"room-description",name:"room-description","aria-describedby":"roomDescripton",onKeyUp:function(){return y("room-description",150,"The description must be under 150 characters.",!0)},tabIndex:"0",required:!0})]}),Object(b.jsxs)("div",{className:"mb-3 form-check",children:[Object(b.jsx)("input",{type:"checkbox",className:"form-check-input",id:"private-room-ch",name:"is-private",onChange:N}),Object(b.jsx)("label",{className:"form-check-label",htmlFor:"private-room-ch",children:"Make room private"})]}),Object(b.jsxs)("div",{className:"mb-3",children:[Object(b.jsx)("label",{htmlFor:"room-password",className:"form-label",children:"Password"}),Object(b.jsx)("input",{type:"password",className:"form-control",id:"room-password",name:"password",onKeyUp:function(){return y("room-password",5,"The password must be at least 4 characters.")},tabIndex:"0",disabled:!0})]}),Object(b.jsx)("button",{type:"submit",className:"btn button-md g-recaptcha","data-sitekey":"reCAPTCHA_site_key",children:"Submit"}),Object(b.jsx)("div",{id:"password-help",className:"form-text",children:"You can't change the password once the room is created."})]})]})})})]})})),I=function(){return Object(b.jsx)("div",{children:Object(b.jsx)("nav",{className:"navbar navbar-dark",children:Object(b.jsx)("div",{className:"container-fluid",children:Object(b.jsx)(o.b,{className:"navbar-brand tr-f",to:"/",children:"Home"})})})})},C=n(55),S=n(53),B=n.n(S),E=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var c;Object(m.a)(this,n),(c=t.call(this,e)).onSubmit=function(e){e.preventDefault();var t=document.getElementById("popup-input").value;if(t){if(t.length>50)return void v("Username must be under 50 characters.");fetch("https://wavy-chat.herokuapp.com/api/create/username",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({username:t,room:c.props.room})}).then((function(e){return e.json()})).then((function(e){e[200]?(O(),document.getElementById("popup-container").classList.add("d-none"),c.props.func(t)):v(e[400])}))}else v("Please input a valid username!")};try{c.content=Object(b.jsx)("div",{className:"input-group mb-3",children:Object(b.jsx)("input",{type:"text",id:"popup-input",className:"popup-input form-control",placeholder:e.placeholder})})}catch(s){v("There was an error while running the 'CreateUsername.jsx' component!")}return c}return Object(d.a)(n,[{key:"render",value:function(){return Object(b.jsxs)("div",{id:"popup-container",children:[Object(b.jsx)(g,{text:""}),Object(b.jsx)("form",{autoComplete:"off",onSubmit:this.onSubmit,children:Object(b.jsxs)("div",{className:"popup form-control p-5",id:"popup",children:[Object(b.jsx)("h3",{className:"title-md mt-5 pt-3",children:this.props.title}),Object(b.jsx)("p",{className:"subtitle",children:this.props.subtitle}),this.content,Object(b.jsx)("button",{type:"submit",className:"btn button-sm w-100",children:"Submit"})]})})]})}}]),n}(s.a.Component),T=n(54),A=n.n(T),F=function(e,t){var n=e.user,c=e.user===t?"message message-from-me d-inline-block":"message message-from-user d-inline-block",s=P(e.msg);return Object(b.jsxs)("div",{children:[Object(b.jsx)("span",{className:"message-sender me-2",children:n}),Object(b.jsx)("div",{className:"mb-1",children:Object(b.jsx)("div",{className:c,children:s})})]})},P=function(e){return Object(b.jsx)(A.a,{tagName:"p",className:"message-text m-0 d-inline",children:e})},L=[],U=function(){console.log("Function reload.");var e=B.a.connect("".concat("https://wavy-chat.herokuapp.com")),t=window.location.href.split("/").pop(),n=Object(c.useState)(L),s=Object(l.a)(n,2),a=s[0],r=s[1];e.on("message",(function(e,t){console.log("Username ".concat(e[1]," incoming message: ").concat(e[0]));var n={msg:e[0],user:e[1]};r([].concat(Object(C.a)(a),[n])),L.push(n);var c=document.getElementById("messages");c.scrollTop=c.scrollHeight}));var o=function(n){try{n.preventDefault()}catch(a){console.warn("Event undefined. -- 'event.preventDefault()'")}var c=document.getElementById("message-input"),s=c.value;""!==s&&s.length<=5e3?(O(),e.emit("message",{message:s,channel:t,username:w}),c.value=""):(console.log("Invalid blank message"),v("Invalid message. Message cannot be blank or contain more than 5000 characters."))};window.onbeforeunload=function(){e.emit("disconnect_client",{room:t,username:w})};var i=function(){var e=document.getElementById("messages"),t=window.innerHeight;t-=205,e.style.height="".concat(t,"px")};return window.onresize=function(){i()},window.onload=function(){i()},Object(b.jsx)("div",{children:Object(b.jsxs)("div",{className:"room",children:[Object(b.jsx)(g,{text:""}),Object(b.jsx)(E,{title:"Create a temporal username.",subtitle:"Other users in this room will identify you with this user.",placeholder:"Input your username!",room:t,func:function(n){console.log("Connected with: "+n),w=n,e.emit("join",{channel:t,username:n})}}),Object(b.jsx)("form",{onSubmit:o,children:Object(b.jsxs)("div",{className:"input-group mb-3 chat-input-container",children:[Object(b.jsx)("input",{type:"text",className:"form-control",placeholder:"Message","aria-label":"Message to send",id:"message-input",name:"message"}),Object(b.jsx)("button",{className:"input-group-text send-button tr-f",id:"send-button",onClick:o,children:Object(b.jsx)("i",{className:"fa-solid fa-paper-plane tr-f"})})]})}),Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("h1",{className:"title mb-3",children:"Chat"}),Object(b.jsxs)("div",{className:"messages",id:"messages",children:[!a.length>0&&Object(b.jsx)("p",{className:"subtitle",children:"Nothing here..."}),function(e,t){var n=[];if(t.length>0)return t.map((function(e,t){return n.push(Object(b.jsx)("div",{children:F(e,w)},t))})),n}(0,a)]})]})]})})};var D=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsxs)(o.a,{children:[Object(b.jsx)(I,{}),Object(b.jsxs)(i.c,{children:[Object(b.jsx)(i.a,{path:"/",exact:!0,component:function(){return Object(b.jsx)(f,{})}}),Object(b.jsx)(i.a,{path:"/create",exact:!0,component:function(){return Object(b.jsx)(k,{})}}),Object(b.jsx)(i.a,{path:"/room/:id",exact:!0,component:function(){return Object(b.jsx)(U,{})}})]})]})})},_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,100)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),s(e),a(e),r(e)}))};r.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(D,{})}),document.getElementById("root")),_()}},[[99,1,2]]]);
//# sourceMappingURL=main.96e4eeba.chunk.js.map